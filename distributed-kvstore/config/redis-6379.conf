# Redis Configuration for Node 1
# Port cho Redis instance này
port 6379

# Bind to localhost (chỉ accept connections từ local machine)
bind 127.0.0.1

# Bật persistence - save data to disk
save 900 1      # Sau 900 giây (15 phút) nếu có ít nhất 1 key thay đổi
save 300 10     # Sau 300 giây (5 phút) nếu có ít nhất 10 keys thay đổi
save 60 10000   # Sau 60 giây nếu có ít nhất 10000 keys thay đổi

# Thư mục lưu data files
dir ./data/redis1

# Tên file database
dbfilename dump1.rdb

# Append Only File (AOF) - log mọi write operation
appendonly yes
appendfilename "appendonly1.aof"

# AOF sync strategy
# always: sync after every write (slow but safest)
# everysec: sync every second (good balance)
# no: let OS decide (fastest but less safe)
appendfsync everysec

# Logging
loglevel notice
logfile ./logs/redis-6379.log

# Max memory
maxmemory 256mb
maxmemory-policy allkeys-lru

# Timeout for idle clients (0 = disabled)
timeout 300

# TCP keepalive
tcp-keepalive 300
